(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const T={loading:{text:"Checking…",className:"status-pill--loading"},ok:{text:"Online",className:"status-pill--ok"},error:{text:"Issue",className:"status-pill--error"}};let h=null;const y=(n,e)=>{if(!h)return;const t=T[n],o=`status-pill ${t.className}`;h.className=o,h.textContent=e??t.text,h.dataset.status=n},_=()=>{const n=document.createElement("header");n.className="site-header";const e=document.createElement("h1");e.className="site-title",e.textContent="Academic Resource Toolkit",h=document.createElement("span"),h.className="status-pill",h.setAttribute("aria-live","polite");const t=document.createElement("div");t.className="site-status";const o=document.createElement("span");return o.className="site-status__label",o.textContent="Status",t.append(o,h),n.append(e,t),y("loading"),n},k=[{href:"",label:"Home"},{href:"harvard.html",label:"Harvard"},{href:"princeton.html",label:"Princeton"},{href:"yale.html",label:"Yale"},{href:"dataverse.html",label:"Dataverse"},{href:"ubc.html",label:"UBC"},{href:"ubc-oai.html",label:"UBC OAI"},{href:"arxiv.html",label:"arXiv"}],I=n=>{const e=n.endsWith("/")?n.slice(0,-1):n,t=window.location.pathname.endsWith("/")?window.location.pathname.slice(0,-1):window.location.pathname;return e===t},U=n=>{const e=document.createElement("nav");return e.className="site-nav",k.forEach(t=>{const o=document.createElement("a"),r=`${n}${t.href}`;o.setAttribute("href",r),o.textContent=t.label,o.className="site-nav__link",(r===window.location.pathname||`${r}/`===window.location.pathname||I(r))&&(o.setAttribute("aria-current","page"),o.classList.add("site-nav__link--current")),e.appendChild(o)}),e},M={info:"Information",error:"Error"},m=(n,e="info")=>{const t=document.createElement("div");return t.className=`alert alert--${e}`,t.setAttribute("role",e==="error"?"alert":"status"),t.setAttribute("aria-label",M[e]),t.textContent=n,t},H="https://art.hicksrch.workers.dev",b=typeof window<"u"?window.__CONFIG__:void 0,R=(b==null?void 0:b.WORKER_BASE)??H,B=n=>{const e=new URLSearchParams;return Object.entries(n).forEach(([t,o])=>{e.set(t,String(o))}),e};async function f(n,e={}){const t={...e};Object.prototype.hasOwnProperty.call(t,"ttl")||(t.ttl=3600);const o=new URL(n,R),s=B(t).toString();s&&(o.search=s);const a=await fetch(o.toString());if(!a.ok)throw new Error(`Request failed with status ${a.status} for ${o.toString()}`);return a.json()}const j=(n,e)=>{n.innerHTML="";const t=document.createElement("p");t.innerHTML=`<strong>ok:</strong> ${String(e.ok)}`;const o=document.createElement("p");o.innerHTML=`<strong>now:</strong> ${e.now??"unknown"}`;const r=document.createElement("ul");r.className="status-list",(e.endpoints??[]).forEach(c=>{const p=document.createElement("li");p.textContent=c,r.appendChild(p)});const s=document.createElement("div"),a=document.createElement("strong");if(a.textContent="endpoints:",s.append(a),r.childElementCount>0)s.appendChild(r);else{const c=document.createElement("p");c.textContent="No endpoints reported.",s.appendChild(c)}const i=document.createElement("div"),l=document.createElement("strong");l.textContent="keys:",i.appendChild(l);const u=document.createElement("ul");u.className="status-list";const d=Object.entries(e.keys??{});if(d.length===0){const c=document.createElement("p");c.textContent="No key information.",i.appendChild(c)}else d.forEach(([c,p])=>{const g=document.createElement("li");g.textContent=`keys.${c}: ${String(p)}`,u.appendChild(g)}),i.appendChild(u);n.append(t,o,s,i)},C=n=>{n.innerHTML="";const e=document.createElement("section");e.className="home-status";const t=document.createElement("h2");t.textContent="Service diagnostics",e.appendChild(t);const o=document.createElement("div");o.className="status-container",o.textContent="Loading status check…",e.appendChild(o),n.appendChild(e),y("loading"),f("/diag").then(r=>{j(o,r),y(r.ok?"ok":"error",r.ok?"Online":"Check service")}).catch(r=>{o.innerHTML="";const s=m(`Unable to load status diagnostics: ${r.message}`,"error");e.insertBefore(s,o),o.textContent="Status information is unavailable.",y("error","Unavailable")})},$=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running Harvard Art Museums probe…",n.appendChild(e),f("/harvard-art/object",{size:1}).then(t=>{var i,l;const o=((i=t.info)==null?void 0:i.totalrecords)??((l=t.info)==null?void 0:l.totalrecordsperquery),r=Array.isArray(t.records)?t.records.length:void 0,s=[];typeof r=="number"&&s.push(`${r} record${r===1?"":"s"}`),typeof o=="number"&&s.push(`${o} total`);const a=s.length>0?s.join(", "):"Endpoint responded";e.textContent=`Probe OK: ${a}.`}).catch(t=>{e.remove(),n.appendChild(m(`Harvard Art Museums probe failed: ${t.message}`,"error"))})},q=n=>{if(Array.isArray(n.records))return n.records.length;if(Array.isArray(n.results))return n.results.length;if(Array.isArray(n.data))return n.data.length;if(Array.isArray(n.hits))return n.hits.length},K=n=>{var e,t,o,r;return(typeof n.count=="number"?n.count:void 0)??((e=n.info)==null?void 0:e.total)??((t=n.info)==null?void 0:t.total_count)??((o=n.pagination)==null?void 0:o.total)??((r=n.pagination)==null?void 0:r.total_count)},x=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running Princeton University Art Museum probe…",n.appendChild(e),f("/princeton-art/objects",{size:1}).then(t=>{const o=q(t),r=K(t),s=[];typeof o=="number"&&s.push(`${o} record${o===1?"":"s"}`),typeof r=="number"&&s.push(`${r} total`);const a=s.length>0?s.join(", "):"Endpoint responded";e.textContent=`Probe OK: ${a}.`}).catch(t=>{e.remove(),n.appendChild(m(`Princeton University Art Museum probe failed: ${t.message}`,"error"))})},P=n=>{if(typeof n=="string")return n;if(n&&typeof n=="object"){const e=n,t=e["@value"];if(typeof t=="string")return t;for(const o of Object.values(e)){if(typeof o=="string")return o;if(Array.isArray(o)){const r=o.find(s=>typeof s=="string");if(typeof r=="string")return r}if(o&&typeof o=="object"){const r=P(o);if(typeof r=="string"&&r.length>0)return r}}}},A=n=>{n.innerHTML="";let e=null;const t=document.createElement("form");t.className="probe-form";const o=document.createElement("label");o.textContent="IIIF manifest URL",o.htmlFor="manifest-url-input";const r=document.createElement("input");r.type="url",r.id="manifest-url-input",r.name="manifestUrl",r.placeholder="https://",r.required=!0,r.autocomplete="off";const s=document.createElement("button");s.type="submit",s.textContent="Test";const a=document.createElement("div");a.className="form-controls",a.append(r,s),t.append(o,a);const i=document.createElement("p");i.textContent="Enter a IIIF manifest URL to test the Yale endpoint.";const l=()=>{e&&(e.remove(),e=null)};t.addEventListener("submit",u=>{u.preventDefault(),l();const d=r.value.trim();if(d.length===0){e=m("Please provide a manifest URL to test.","error"),n.insertBefore(e,t);return}i.textContent="Testing manifest…",f("/yale-iiif",{url:d}).then(c=>{const p=P(c.label),g=p&&p.length>0?p:"Manifest loaded";i.textContent=`Probe OK: ${g}.`}).catch(c=>{i.textContent="",e=m(`Yale IIIF probe failed: ${c.message}`,"error"),n.insertBefore(e,t)})}),n.append(t,i)},w=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running Dataverse probe…",n.appendChild(e),f("/dataverse/search",{q:"data",per_page:1}).then(t=>{var i,l,u;const o=((i=t.data)==null?void 0:i.total_count)??t.total_count??(typeof t.count=="number"?t.count:void 0),r=Array.isArray((l=t.data)==null?void 0:l.items)?(u=t.data)==null?void 0:u.items.length:void 0,s=[];typeof r=="number"&&s.push(`${r} result${r===1?"":"s"}`),typeof o=="number"&&s.push(`${o} total`);const a=s.length>0?s.join(", "):"Endpoint responded";e.textContent=`Probe OK: ${a}.`}).catch(t=>{e.remove(),n.appendChild(m(`Dataverse probe failed: ${t.message}`,"error"))})},L=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running UBC Open Collections probe…",n.appendChild(e),f("/ubc/search",{q:"newspaper",limit:1}).then(t=>{const o=t.total??t.resultCount,r=Array.isArray(t.results)?t.results.length:Array.isArray(t.items)?t.items.length:void 0,s=[];typeof r=="number"&&s.push(`${r} result${r===1?"":"s"}`),typeof o=="number"&&s.push(`${o} total`);const a=s.length>0?s.join(", "):"Endpoint responded";e.textContent=`Probe OK: ${a}.`}).catch(t=>{e.remove(),n.appendChild(m(`UBC Open Collections probe failed: ${t.message}`,"error"))})},N=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running UBC OAI Identify probe…",n.appendChild(e),f("/ubc-oai",{verb:"Identify"}).then(t=>{var s;const r=t.repositoryName??((s=t.Identify)==null?void 0:s.repositoryName)??void 0??"Endpoint responded";e.textContent=`Probe OK: ${r}.`}).catch(t=>{e.remove(),n.appendChild(m(`UBC OAI probe failed: ${t.message}`,"error"))})},O=n=>{n.innerHTML="";const e=document.createElement("p");e.textContent="Running arXiv probe…",n.appendChild(e);const t=new URL("/arxiv/search",R),o=new URLSearchParams({search_query:"cat:cs.AI",max_results:"1"});t.search=o.toString(),fetch(t.toString()).then(r=>{if(!r.ok)throw new Error(`Request failed with status ${r.status}`);return r.text()}).then(r=>{var d,c;const a=new DOMParser().parseFromString(r,"application/xml");if(a.querySelector("parsererror"))throw new Error("Received invalid XML from arXiv endpoint");const l=(c=(d=a.querySelector("entry > title"))==null?void 0:d.textContent)==null?void 0:c.trim(),u=l&&l.length>0?l:"Endpoint responded";e.textContent=`Probe OK: ${u}.`}).catch(r=>{e.remove(),n.appendChild(m(`arXiv probe failed: ${r.message}`,"error"))})},W={"/":C,"/index.html":C,"/harvard":$,"/harvard.html":$,"/princeton":x,"/princeton.html":x,"/yale":A,"/yale.html":A,"/dataverse":w,"/dataverse.html":w,"/ubc":L,"/ubc.html":L,"/ubc-oai":N,"/ubc-oai.html":N,"/arxiv":O,"/arxiv.html":O},S="/art/",F=n=>{let e=n||"/";return e.startsWith(S)&&(e=`/${e.slice(S.length)}`),e=e.replace(/\/+/g,"/"),e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1)),e||"/"},z=n=>{const e=F(n);return W[e]??C},D="/art/",E=document.getElementById("app");if(!E)throw new Error("Missing #app container");E.innerHTML="";const X=_(),Y=U(D),v=document.createElement("main");v.className="site-main";E.append(X,Y,v);const G=z(window.location.pathname);G(v);
